<!DOCTYPE HTML>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->

<html>

<head>
    <title>ChainYen System</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

    {% load static %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <link rel="stylesheet" href="{%static 'assets/css/main.css' %}" />

    <noscript>
        <link rel="stylesheet" href="{%static 'assets/css/noscript.css' %}" />
    </noscript>
    <style type="text/css">
        .rwd-table {
            /*background: #fff;*/
            overflow: hidden;
        }

        .rwd-table tr:nth-of-type(2n) {
            /*background: #eee;*/
        }

        .rwd-table th,
        .rwd-table td {
            margin: 0.5em 1em;
        }

        .rwd-table {
            min-width: 100%;
        }

        .rwd-table th {
            display: none;
        }

        .rwd-table td {
            display: block;
        }

        .rwd-table td:before {
            content: attr(data-th) " : ";
            font-weight: bold;
            width: 6.5em;
            display: inline-block;
        }

        .rwd-table th,
        .rwd-table td {
            text-align: left;
        }

        .rwd-table th,
        .rwd-table td:before {
            color: #FF2D2D;
            font-weight: bold;
            /*background-color:#BEBEBE	;*/
        }

        @media (min-width: 480px) {
            .rwd-table td:before {
                display: none;
            }

            .rwd-table th,
            .rwd-table td {
                display: table-cell;
                padding: 0.25em 0.5em;
            }

            .rwd-table th:first-child,
            .rwd-table td:first-child {
                padding-left: 0;
            }

            .rwd-table th:last-child,
            .rwd-table td:last-child {
                padding-right: 0;
            }

            .rwd-table th,
            .rwd-table td {
                padding: 1em !important;
            }
        }
    </style>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        {% include 'baseHeader.html' %}

        <!-- Menu -->
        {% include 'baseMenu.html' %}

        <!-- Main -->

        <div id="main" class="alt">
            <!-- Modal -->
            <div class="modal fade" id="pointModal" tabindex="-1" aria-labelledby="pointModalLabel" aria-hidden="true"
                style="width:100%">
                <div class="modal-dialog modal-xl modal-dialog-centered pt-5">
                    <div class="modal-content" style="background-color: #2a2f4a;" style="width:100%;">
                        <div class="modal-header">
                            <h5 class="modal-title" id="pointModalLabel">點數歷史紀錄</h5>
                        </div>
                        <div class="modal-body table-responsive">
                            <table id="example" class="display table-bordered " style="width:100%">
                                <thead>
                                    <tr>
                                        <th>變更者</th>
                                        <th>修改日期</th>
                                        <th>增點</th>
                                        <th>扣點</th>
                                        <th>轉讓</th>
                                        <th>原因</th>
                                        <th>剩餘點數</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <section id="one">

                <div class="inner">
                    {% include 'managerPages/managerHomePageHeaderBar.html' %}
                    <div class="row">
                        <div class="col"><button id="addPointByAll"
                                class="addPointByOption btn-primary">給予全部會員點數</button></div>
                        <div class="col"><button id="addPointByJobTitle"
                                class="addPointByOption btn-primary">按職務給點數</button></div>
                        <div class="col"><button id="addPointByAmwayAward"
                                class="addPointByOption btn-primary">按獎銜給點數</button></div>
                    </div>
                    <table id="myTable" class="rwd-table">
                        　
                        <tr>
                            　　
                            <th>姓名</th>
                            　　
                            <th>會員編號</th>
                            　　
                            <th>職務</th>
                            　　
                            <th>獎銜</th>
                            　　
                            <th>點數</th>
                            　　
                            <th>增點</th>
                            　　
                            <th>扣點</th>

                            <th>點數歷史紀錄</th>
                            　
                        </tr>
                        {% for UserAccount in searchUserAccountInfo %}
                        <tr id="{{UserAccount.id}}_tr">
                            　　
                            <td id="{{UserAccount.username}}_user" data-th="姓名">
                                {{UserAccount.user}}
                            </td>
                            　　
                            <td id="{{UserAccount.username}}_amwayNumber" data-th="會員編號">
                                {{UserAccount.useraccountamwayinfo_set.first.amwayNumber}}
                            </td>
                            　　
                            <td id="{{UserAccount.username}}_jobTitle" data-th="職務">
                                {{UserAccount.useraccountchainyeninfo_set.first.jobTitle.jobTitle}}
                            </td>
                            　　
                            <td id="{{UserAccount.username}}_amwayAward" data-th="獎銜">
                                {{UserAccount.useraccountamwayinfo_set.first.amwayAward.amwayAward}}
                            </td>
                            　　
                            <td id="{{UserAccount.username}}_point" data-th="點數">
                                {{UserAccount.useraccountchainyeninfo_set.first.point}}
                            </td>
                            　　
                            <td id="{{UserAccount.username}}_addPoint" data-th="增點">
                                <button class="button_modified">+10</button>
                            </td>

                            <td id="{{UserAccount.username}}_reducePoint" data-th="扣點">
                                <button class="button_modified">-1</button>
                            </td>
                            　　
                            <td id="{{UserAccount.username}}_getPointHistory" data-th="點數歷史紀錄">
                                <button class="button_history" type="button" data-toggle="modal"
                                    data-target="#pointModal">
                                    查看
                                </button>
                            </td>

                        </tr>
                        {% endfor %}

                    </table>
                </div>

            </section>

            <section id="two" class="spotlights">


            </section>
            <!-- Button trigger modal -->


            {% if pageisNotNull %}
            <div class="dataTables_paginate paging_simple_numbers pull-right inner">
                <ul class="pagination ">
                    {{ pagination.page_html|safe }}
                </ul>

            </div>
            {% endif %}


        </div>

    </div>


    <!-- Scripts -->
    <script src="{%static 'assets/js/jquery.min.js' %}"></script>
    <script src="{%static 'assets/js/jquery.scrolly.min.js' %}"></script>
    <script src="{%static 'assets/js/jquery.scrollex.min.js' %}"></script>
    <script src="{%static 'assets/js/browser.min.js' %}"></script>
    <script src="{%static 'assets/js/breakpoints.min.js' %}"></script>
    <script src="{%static 'assets/js/util.js' %}"></script>
    <script src="{%static 'assets/js/main.js' %}"></script>
    <script src="{%static 'assets/js/cyMain.js' %}"></script>
    <script src="{%static 'assets/js/viewPageAjax.js' %}"></script>
    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/bootbox/bootbox.min.js' %}"></script>
    <script src="{% static 'assets/js/bootbox/bootbox.locales.min.js' %}"></script>
    <script src="{% static 'assets/js/pointManager.js' %}"></script>

    <link rel="stylesheet" type="text/css"
        href="{% static 'assets/css/datatables.min.css' %}"/>

    <script type="text/javascript"
        src="{% static 'assets/js/datatables.min.js' %}"></script>
</body>

</html>

<style>
    .modal-content {
        background-color: #2a2f4a;
    }
</style>

<script>
    amwayAwardListString = '{{ amwayAwardList | safe }}'
    jobTitleListString = '{{ jobTitleList | safe }}'
    window.amwayAwardList = JSON.parse(amwayAwardListString)
    window.jobTitleList = JSON.parse(jobTitleListString)
</script>